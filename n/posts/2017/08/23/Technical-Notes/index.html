<!doctype html>
<html class="no-js" lang="en">
    <head>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="//www.googletagmanager.com/gtag/js?id=UA-61795702-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-61795702-1');
</script>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Technical Notes</title>
        <meta name="title" content="Technical Notes">
        <link rel="stylesheet" href="../../../../../../css/default.css" />

        <script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/solarized-light.min.css">
        
    </head>
    <body>

 <div class="nav-container">
    <div class="frow-container">
      <div class="frow">
        <div class="col-md-3-4">
          <div class="frow justify-between">
            <span><a href="../../../../../../">Natural Stupidity</a></span>
            <ul>
              <li><a href="../../../../../../n">Home</a></li>
              <li><a href="../../../../../../n/about">About</a></li>
              <li><a href="../../../../../../n/contact/">Contact</a></li>
              <li><a href="../../../../../../n/archive/">Archive</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
 </div>


        <!-- main section -->
<div class="frow-container">
    <div class="frow">
        <div class="col-md-3-4"> 
           <div class="grid-container" style="min-height:100vh" id="main">
    <article class="grid-y post">
        <div class="card">
            <div class="card-divider">
                <header class="cell">
                    <h1>Technical Notes</h1>
                    <p>
                        <i class="far fa-calendar"></i>&nbsp;<span class="dateline">August 23, 2017</span>&nbsp;
                        <i class="far fa-user"></i>&nbsp;<span class="byline-name">Yun Hao</span>&nbsp;
                        <i class="fas fa-history"></i>&nbsp;<a href="https://github.com/haoyun/haoyun.github.io/commits/source/src_site/n/posts/2017-08-23-Technical-Notes.markdown">History</a>&nbsp;
                        <i class="fas fa-code"></i>&nbsp;<a href="https://raw.githubusercontent.com/haoyun/haoyun.github.io/5b1e301/src_site/n/posts/2017-08-23-Technical-Notes.markdown">5b1e301</a>
                    </p>
                </header>
            </div>
            <div class="card-section">
                <div class="cell">
                    <p>This post is used to record what I have done to build up this project out of the original, basic, official templates of Hakyll and Foundation.</p>
<!--more-->
<h2 id="how-was-this-project-initialized">How was this project initialized?</h2>
<pre class="bash"><code>hakyll-init Hakyll-Foundation
cd Hakyll-Foundation
foundation new --framework sites --directory Foundation --template basic
git init
git remote add origin git@github.com:haoyun/Hakyll-Foundation.git
git commit --allow-empty -m &quot;dummy first commit&quot;
git push origin master
git checkout --orphan source
git submodule add git@github.com:haoyun/Hakyll-Foundation.git html_public
git commit -m &quot;add submodule&quot;
git push origin source
#cd html_public
#git commit --allow-empty -m 'update'
#git push origin master
#cd ..
git add .
git commit -m 'source update'
git push origin source</code></pre>
<h3 id="restruture-the-wroking-directory">Restruture the Wroking Directory</h3>
<pre class="bash"><code>.
├── dist                                # distribution
├── Foundation                          # Zurb Foundation SCSS files
├── Hakyll-Foundation.cabal             # cabal file
├── html_public                         # generated site for publishing
├── LICENSE                             # license
├── README.md                           # readme
├── src                                 # all Haskell files and pandoc filters
│   └── site.hs                         
└── src_site                            # all source code for the site
    ├── css                             # css files, possibly generated by Foundation
    │   └── ...        
    ├── images                          # images
    │   └── ...
    ├── posts                           # blog posts
    │   ├── 2015-08-12-spqr.markdown
    │   └── ...
    ├── templates                       # tempate files
    │   ├── default.html
    │   └── ...
    ├── index.html
    └── ...</code></pre>
<h3 id="change-configurations">Change Configurations</h3>
<ul>
<li>In <code>Foundation</code> folder, the configuration file <code>gulpfile.js</code> controls the output directory of the CSS file.</li>
</ul>
<pre class="nodejs"><code>.pipe(gulp.dest('../src_site/css'));</code></pre>
<ul>
<li>To make sure that hakyll will find all the Hakyll source files that are put under the <code>./scr</code> directory, there are two files to change. The first is the ‘.cabal’ file.</li>
</ul>
<pre class="json"><code>main-is:          site.hs
Hs-source-dirs:   src</code></pre>
<p>The second is the <code>main.hs</code> file. We have to change Hakyll’s Configuration. So in replacement of the default <code>hakyll $ do</code>, which will run hakyll with <code>defaultConfiguration</code>, we need to write</p>
<pre class="haskell"><code>main = hakyllWith hfConfiguration $ do</code></pre>
<p>and define the customized configurations.</p>
<pre class="haskell"><code>hfConfiguration :: Configuration
hfConfiguration = defaultConfiguration
    {   
        providerDirectory    = &quot;./src_site&quot;
    }</code></pre>
<p>The above is adapted from <a href="https://hackage.haskell.org/package/hakyll-4.9.8.0/docs/Hakyll-Core-Configuration.html"><code>Hakyll.Core.Configuration</code></a>. As we can see, there are many configurations that we can modify according to our need. Most importantly, if <code>Foundation</code> is inside the <code>providerDirectory</code>, one has to use ignoreFile to ignore it. Otherwise, it takes an extremely long time to generate the site.</p>
<h3 id="url-without-.html">Url without <code>.html</code></h3>
<p>There are many solutions available on the Internet.</p>
<ul>
<li><a href="https://aherrmann.github.io/programming/2016/01/31/jekyll-style-urls-with-hakyll/">This one</a> seems to be the best solution.</li>
</ul>
<p>This solution makes Hakyll to generate the <em>correct</em> url in the very beginning, rather than modify the <em>wrong</em> url that has been put into the html files. The latter approach has the potential that it does not correct all urls, and that it may also introduce mistakes for the urls that should be in their original form.</p>
<p>Other solutions are</p>
<ul>
<li><a href="https://www.rohanjain.in/hakyll-clean-urls/">Alternative 1</a></li>
<li><a href="http://alexanderlobov.ru/posts/2017-02-05-hakyll-clean-urls/">Alternative 2</a></li>
</ul>
<h3 id="restrucure">Restrucure</h3>
<h3 id="reminder">Reminder</h3>
<p>This is a post about TikZ.</p>
<ul>
<li>https://skybluetrades.net/blog/posts/2013/11/25/the-teeny-tiny-happy-hakyll-tikz-pixie.html</li>
</ul>
<p>The source code of it show how to add new commands to the main program. It’s better to create a command like</p>
<pre class="bash"><code>cabal run newpost
? Title:
? Author:
? Tag (separated by comma):</code></pre>
<p>to create a new post (and metadata file) based on a template file.</p>
<ul>
<li>https://www.gwern.net/About</li>
</ul>
<p>This is another well programmed site.</p>
<p>To display full/part instead of just titles on the home page, see for examle:</p>
<ul>
<li>https://github.com/travisbrown/metaplasm</li>
<li>https://github.com/aherrmann/aherrmann.github.io.hakyll</li>
</ul>
                </div>
            </div>
        </div>
        <div class="cell">
            <script>
var idcomments_acct = '3eb5e7864d2f0dc9d1586c6209453d5d';
var idcomments_post_id;
var idcomments_post_url = '/n/posts/2017/08/23/Technical-Notes';
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script src="https://www.intensedebate.com/js/genericCommentWrapperV2.js"></script>

        </div>
    </article>
</div>

        </div>
    </div>
</div>

		<!-- Footer -->
  <div class="footer-container">
    <div class="frow-container">
      <div class="frow">
        <div class="col-md-3-4">
          <footer> 

<div class="frow justify-start">
<div class="col-md-3-4">
    <h4>About</h4>
    <div class="footer-info">
        <p>This site is proudly generated by <a href="//jaspervdj.be/hakyll/">Hakyll</a>
           from <a href="//pandoc.org/">Pandoc</a>'s extended
           <a href="//daringfireball.net/projects/markdown/">Markdown</a>.
           The site together with its 
           <a href="https://github.com/haoyun/haoyun.github.io">source code</a>
           is hosted on <a href="https://pages.github.com/">GitHub</a>.
        </p>
    </div>
    <div class="footer-source">
        <p>The current page is Compiled from commit <a href="https://raw.githubusercontent.com/haoyun/haoyun.github.io/5b1e301/src_site/n/posts/2017-08-23-Technical-Notes.markdown">5b1e301</a>.</p>
    </div>
</div>
<div class="col-md-1-4">
    <div class="footer-links">
        <h4>Links</h4>
        <ul>
            <li><a href="//push2kindle-154021.appspot.com/">KindleEar</a></li>
            <li><a href="//runalyze.com/athlete/dasistmiregal">Runalyze</a></li>
            <!--<li><a href="/n/">Blog</a></li>-->
            <li><a href="../../../../../../s/links/">Some Links</a></li>
            <!--<li><a href="/s/tools/">Tools</a></li>-->
            <li><a href="../../../../../../comment/">Leave a Message</a></li>
        </ul>
    </div>
</div>
    <div class="footer-copyright">
        <p>
            © Yun Hao &bull; 2016--2019 &bull; <a href="mailto:haoyun_public@163.com">haoyun_public@163.com</a>
        </p>

    </div>
</div>
</footer>


        </div>
      </div>
    </div>
  </div>


<a href="javascript:void(0);" id="rocketmeluncur" class="showrocket"><i></i></a>
<!-- fork on github
<div class="show-for-medium">
<a href="https://github.com/haoyun/haoyun.github.io/"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
</div>
<script src="//static.getclicky.com/js"></script>
<script>try{ clicky.init(101019144); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1"
  src="//in.getclicky.com/101019144ns.gif" /></p></noscript>
-->

<!-- JavaScript -->
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
<script src="//code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="../../../../../../js/app.js"></script>
<script>
    hljs.configure({
      languages: [] // Turn-off autodetection
    })
    hljs.initHighlightingOnLoad();
    //$(document).foundation();
</script>




    </body>
</html>
